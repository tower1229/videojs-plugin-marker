(function(r,o){typeof exports=="object"&&typeof module!="undefined"?module.exports=o(require("video.js")):typeof define=="function"&&define.amd?define(["video.js"],o):(r=typeof globalThis!="undefined"?globalThis:r||self,r.lib=o(r.videojs))})(this,function(r){"use strict";function o(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var i=o(r);const m=i.default.getComponent("Component"),p=i.default.getComponent("TimeTooltip");class f extends m{constructor(e,t){super(e,t),this.options=t,this.timeToltip=new p(e),this.timeToltip.hide(),this.addChild(this.timeToltip),this.addClass("vjs-marker-point-tip"),this.timeToltip.el_.innerHTML=`
      <p class="vjs-marker-point-tip-time">${i.default.formatTime(this.options.offset,600)}</p>
      <p class="vjs-marker-point-tip-content">${this.options.data?this.options.data.content:""}</p>
    `}updatePosition(){this.timeToltip.el_.style.left=`-${this.timeToltip.el_.getBoundingClientRect().width/2}px`}}class c extends m{constructor(e,t){super(e,t),this.offset=t.offset,this.data=t.data,this.tip=new f(e,{data:this.data,offset:this.offset}),this.mouseDisplay=e.getDescendant(["ControlBar","ProgressControl","SeekBar","MouseTimeDisplay"]),this.addChild(this.tip),this.enableTouchActivity(),this.on("mouseenter",s=>{this.mouseDisplay.hide(),this.tip.timeToltip.show(),this.tip.updatePosition()}),this.on("mouseleave",s=>{this.mouseDisplay.show(),this.tip.timeToltip.hide()}),this.on("mousedown",s=>{typeof t.onClick=="function"&&t.onClick(s)})}createEl(){return i.default.dom.createEl("div",{className:"vjs-marker-point"})}updatePosition(e){this.el_&&(this.el_.style.left=this.offset/e*100+"%")}}const k=i.default.getComponent("Component");let u;class d extends k{static build(e,t){t.markers instanceof Array||(t.markers=[]);const s=[];for(let n=t.markers.length;n--;)s.push(new c(e,t.markers[n]));return new d(e,{markers:s,barName:"markerPoint"})}constructor(e,t){super(e,t),t.markers.forEach(h=>this.addChild(h));const s=()=>{t.markers.forEach(h=>{h.updatePosition(u)})},n=()=>{u=e.duration(),s(),e.off("loadedmetadata",n)};u?s():e.on("loadedmetadata",n)}createEl(){return i.default.dom.createEl("div",{className:"vjs-marker-bar"})}}i.default.registerComponent("MarkerBar",d);const g="0.0.6";var T="";const C=i.default.getPlugin("plugin"),v={};class l extends C{constructor(e,t){super(e),this.player.addClass("vjs-marker-plugin"),this.updateOptions(t)}createMarkerBar(){return this.markerBar=d.build(this.player,{markers:this.options.markers}),this.markerBar}updateOptions(e){this.options=i.default.mergeOptions(v,e),this.markerBar&&this.markerBar.dispose();const t=this.player.getDescendant(["ControlBar","ProgressControl","SeekBar"]);this.createMarkerBar(),t.addChild(this.markerBar)}}return l.defaultState={},l.VERSION=g,i.default.registerPlugin("markerPlugin",l),l});
