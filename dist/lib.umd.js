(function(r,n){typeof exports=="object"&&typeof module!="undefined"?module.exports=n(require("video.js")):typeof define=="function"&&define.amd?define(["video.js"],n):(r=typeof globalThis!="undefined"?globalThis:r||self,r.lib=n(r.videojs))})(this,function(r){"use strict";function n(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var s=n(r);const u=s.default.getComponent("Component"),h=s.default.getComponent("TimeTooltip");class p extends u{constructor(t,e){super(t,e),this.options=e,this.timeToltip=new h(t),this.timeToltip.hide(),this.addChild(this.timeToltip),this.addClass("vjs-marker-point-tip"),this.timeToltip.el_.innerHTML=`
      <p class="vjs-marker-point-tip-time">${s.default.formatTime(this.options.offset,600)}</p>
      <p class="vjs-marker-point-tip-content">${this.options.data.content}</p>
    `}updatePosition(){this.timeToltip.el_.style.left=`-${this.timeToltip.el_.getBoundingClientRect().width/2}px`}}class m extends u{constructor(t,e){super(t,e),this.offset=e.offset,this.type=e.type,this.data=e.data,this.tip=new p(t,{data:this.data,offset:this.offset}),this.mouseDisplay=t.getDescendant(["ControlBar","ProgressControl","SeekBar","MouseTimeDisplay"]),this.addChild(this.tip),this.enableTouchActivity(),this.on("mouseenter",o=>{this.mouseDisplay.hide(),this.tip.timeToltip.show(),this.tip.updatePosition()}),this.on("mouseleave",o=>{this.mouseDisplay.show(),this.tip.timeToltip.hide()})}createEl(){return s.default.dom.createEl("div",{className:"vjs-marker-point"})}updatePosition(t){console.log(this.offset,t),this.el_.style.left=this.offset/t*100+"%"}}const f=s.default.getComponent("Component");class d extends f{static build(t,e){e.markers instanceof Array||(e.markers=[]);const o=[];for(let a=e.markers.length;a--;)o.push(new m(t,e.markers[a]));return new d(t,{markers:o,barName:"markerPoint"})}constructor(t,e){super(t,e),e.markers.forEach(a=>this.addChild(a));const o=()=>{const a=t.duration();e.markers.forEach(v=>{v.updatePosition(a)}),t.off("loadedmetadata",o)};t.on("loadedmetadata",o)}createEl(){return s.default.dom.createEl("div",{className:"vjs-marker-bar"})}}s.default.registerComponent("MarkerBar",d);const c="0.0.2";var C="";const k=s.default.getPlugin("plugin"),g={};class l extends k{constructor(t,e){super(t),this.options=s.default.mergeOptions(g,e),this.player.addClass("vjs-marker-plugin"),this.updateOptions()}createMarkerBar(){return this.markerBar=d.build(this.player,{markers:this.options.markers}),this.markerBar}updateOptions(t){this.options=s.default.mergeOptions(this.options,t),this.markerBar&&this.markerBar.dispose();const e=this.player.getDescendant(["ControlBar","ProgressControl","SeekBar"]);this.createMarkerBar(),e.addChild(this.markerBar)}}return l.defaultState={},l.VERSION=c,s.default.registerPlugin("markerPlugin",l),l});
